{
  "hash": "36ada2c0a2f1c3ec9e57eadf85d6b8aa",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"weeklyexpenses\"\nformat: html\n---\n\n# **Diwali Week Expenditure Analysis of Srishti Students**\n\nThis dataset captures the spending patterns of Srishti students during Diwali week.\n\n------------------------------------------------------------------------\n\n## Data Dictionary\n\nQualitative Variables\n\n:   -   **Name:** Factor indicating name of the participant.\n\n    -   **gender:** Factor indicating sex. Gender refers to either Male or Female.\n\n    -   **total_expenditure_last_week:** Numeric indicating total amount spent by the student during Diwali week, measured in Indian Rupees (₹),\n\n## Our questions/ assumptions before performing EDA:\n\n-   Would there be a significant difference in average expenditure between male and female students during Diwali week?\n-   Student allowances/ income are typically modest, so less than 20% of students spend more than ₹5,000 during Diwali week.\n\n------------------------------------------------------------------------\n\n#### Setting up the libraries\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.2\n✔ ggplot2   4.0.0     ✔ tibble    3.3.0\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.1.0     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(mosaic) # Our go-to package\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRegistered S3 method overwritten by 'mosaic':\n  method                           from   \n  fortify.SpatialPolygonsDataFrame ggplot2\n\nThe 'mosaic' package masks several functions from core packages in order to add \nadditional features.  The original behavior of these functions should not be affected by this.\n\nAttaching package: 'mosaic'\n\nThe following object is masked from 'package:Matrix':\n\n    mean\n\nThe following objects are masked from 'package:dplyr':\n\n    count, do, tally\n\nThe following object is masked from 'package:purrr':\n\n    cross\n\nThe following object is masked from 'package:ggplot2':\n\n    stat\n\nThe following objects are masked from 'package:stats':\n\n    binom.test, cor, cor.test, cov, fivenum, IQR, median, prop.test,\n    quantile, sd, t.test, var\n\nThe following objects are masked from 'package:base':\n\n    max, mean, min, prod, range, sample, sum\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(ggformula)\nlibrary(infer) # An alternative package for inference using tidy data\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'infer'\n\nThe following objects are masked from 'package:mosaic':\n\n    prop_test, t_test\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(broom) # Clean test results in tibble form\nlibrary(skimr) # data inspection\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'skimr'\n\nThe following object is masked from 'package:mosaic':\n\n    n_missing\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(tinytable) # Pretty Tables\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'tinytable'\n\nThe following object is masked from 'package:ggplot2':\n\n    theme_void\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(kableExtra) # Pretty Tables\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'kableExtra'\n\nThe following object is masked from 'package:dplyr':\n\n    group_rows\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(ggprism) # Prism-like ggplot themes\nlibrary(resampledata3) # Datasets from Chihara and Hesterberg's book\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'resampledata3'\n\nThe following object is masked from 'package:datasets':\n\n    Titanic\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(openintro) # datasets\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: airports\nLoading required package: cherryblossom\nLoading required package: usdata\n\nAttaching package: 'openintro'\n\nThe following object is masked from 'package:mosaic':\n\n    dotPlot\n\nThe following objects are masked from 'package:lattice':\n\n    ethanol, lsegments\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(infer)\nlibrary(vcd)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: grid\n\nAttaching package: 'vcd'\n\nThe following object is masked from 'package:mosaic':\n\n    mplot\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(resampledata)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'resampledata'\n\nThe following objects are masked from 'package:resampledata3':\n\n    Bushmeat, ChiMarathonMen, Cuckoos, FlightDelays, Groceries,\n    IceCream, MobileAds, NCBirths2004, Olympics2012, Phillies2009,\n    Recidivism\n\nThe following object is masked from 'package:datasets':\n\n    Titanic\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(openintro)\nlibrary(readr)\nlibrary(naniar)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'naniar'\n\nThe following object is masked from 'package:skimr':\n\n    n_complete\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(janitor)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'janitor'\n\nThe following objects are masked from 'package:stats':\n\n    chisq.test, fisher.test\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(DT)\nlibrary(crosstable)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'crosstable'\n\nThe following object is masked from 'package:purrr':\n\n    compact\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(geofacet)\nlibrary(ggplot2)\n```\n:::\n\n\n#### Reading The Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nWeeklyexp <- readr::read_delim(\"~/Downloads/Datasets for A3/weeklyexpense.csv\") %>% \n  janitor::clean_names(case = \"snake\") %>% \n  dplyr::glimpse()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nNew names:\nRows: 40 Columns: 6\n── Column specification\n──────────────────────────────────────────────────────── Delimiter: \",\" chr\n(2): Name, Gender dbl (1): Total_Expenditure_Last_Week lgl (3): ...4, ...5,\n...6\nℹ Use `spec()` to retrieve the full column specification for this data. ℹ\nSpecify the column types or set `show_col_types = FALSE` to quiet this message.\n• `` -> `...4`\n• `` -> `...5`\n• `` -> `...6`\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 40\nColumns: 6\n$ name                        <chr> \"Radha\", \"Prerana\", \"Chris\", \"Nireeksha\", …\n$ gender                      <chr> \"Female\", \"Female\", \"Male\", \"Female\", \"Mal…\n$ total_expenditure_last_week <dbl> 2000.0, 1200.0, 15000.0, 3620.0, 560.0, 22…\n$ x4                          <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n$ x5                          <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n$ x6                          <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n```\n\n\n:::\n\n```{.r .cell-code}\nWeeklyexp\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 40 × 6\n   name      gender total_expenditure_last_week x4    x5    x6   \n   <chr>     <chr>                        <dbl> <lgl> <lgl> <lgl>\n 1 Radha     Female                        2000 NA    NA    NA   \n 2 Prerana   Female                        1200 NA    NA    NA   \n 3 Chris     Male                         15000 NA    NA    NA   \n 4 Nireeksha Female                        3620 NA    NA    NA   \n 5 Supraj    Male                           560 NA    NA    NA   \n 6 Adit      Male                          2200 NA    NA    NA   \n 7 Shweta    Female                        1500 NA    NA    NA   \n 8 Diya      Female                        1206 NA    NA    NA   \n 9 Kshama    Female                        1400 NA    NA    NA   \n10 Savannah  Female                        2500 NA    NA    NA   \n# ℹ 30 more rows\n```\n\n\n:::\n:::\n\n\n#### Inspecting the Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\n visdat::vis_dat(Weeklyexp) + ggtitle(label= \"Weekly expenditure: Missing Data\", subtitle = \"Showing Variable Types\")\n```\n\n::: {.cell-output-display}\n![](weeklyexpenses_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\n  visdat::vis_miss(Weeklyexp)\n```\n\n::: {.cell-output-display}\n![](weeklyexpenses_files/figure-html/unnamed-chunk-3-2.png){width=672}\n:::\n:::\n\n\n#### Data Munging:\n\nThere are a few extra columns named \"x4\", \"x5\" and \"x6\"; let us remove those:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nWeeklyexp1 <- Weeklyexp %>% \n  select(-c(x4, x5, x6)) %>% \n  \n    mutate(across(where(is.character), as.factor)) %>% \n  tidyr::drop_na()\nWeeklyexp1\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 40 × 3\n   name      gender total_expenditure_last_week\n   <fct>     <fct>                        <dbl>\n 1 Radha     Female                        2000\n 2 Prerana   Female                        1200\n 3 Chris     Male                         15000\n 4 Nireeksha Female                        3620\n 5 Supraj    Male                           560\n 6 Adit      Male                          2200\n 7 Shweta    Female                        1500\n 8 Diya      Female                        1206\n 9 Kshama    Female                        1400\n10 Savannah  Female                        2500\n# ℹ 30 more rows\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nWeeklyexp1 %>% \ngf_histogram(~total_expenditure_last_week) %>% \n  gf_facet_grid(~gender) %>% \n  gf_labs( title= \"Distribution of expenditure among sristhi students by gender\", subtitle=\"During the week of Diwali\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`stat_bin()` using `bins = 30`. Pick better value `binwidth`.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](weeklyexpenses_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\nBoth male and female distributions are heavily right-skewed, meaning most students spend relatively little, but a few extreme high spenders pull the average upward. The median will be much lower than the mean for both groups. Females seem to portray comparatively consistent and moderate spending behavior, in contrast to males, showing more diverse spending behaviors.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nWeeklyexp1 %>% \ngf_boxplot(gender~total_expenditure_last_week, orientation = \"y\") %>% \n  gf_labs(title=\"Distribution of expenditure by Srishti Students\",\n          subtitle=\"During the week of Diwali\")\n```\n\n::: {.cell-output-display}\n![](weeklyexpenses_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nThrough this boxplot, we understand that males on average spent more during diwali than females in srishti.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nWeeklyexp1 %>% \ngf_violin(gender  ~ total_expenditure_last_week, fill = ~gender) %>% \n  gf_labs(title=\"Distribution of expenditure by Srishti Students\",\n          subtitle=\"During the week of Diwali\")\n```\n\n::: {.cell-output-display}\n![](weeklyexpenses_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nFor female students, we see the highest density at approximately ₹1,000-₹2,000. We also see very few students beyond ₹5,000.\n\nFor male students,primary density peak at ₹2,000-₹4,000. But the distribution is flatter, meaning that the density is more spread out. Multiple smaller peaks suggest different spending subgroups:\n\n-   Budget spenders (₹0-₹5K) - majority\n\n-   Moderate spenders (₹10-15K) - small group\n\n-   High spenders (₹20-25K) - few individuals\n\n-   Extreme spenders (₹50K+) - rare cases\n\n----------------------------\n\n## Is data normally distributed??\n\n\n::: {.cell}\n\n```{.r .cell-code}\nWeeklyexp1%>% \n  gf_density(~total_expenditure_last_week) %>%\n  gf_fitdistr(dist = \"dnorm\") %>%\n  gf_labs(\n    title = \"Density of Total expenditure\",\n    subtitle = \"Compared with Normal Density\"\n  )\n```\n\n::: {.cell-output-display}\n![](weeklyexpenses_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\nThe data is far from the normality curve. This is a severe violation of the normality assumptions. Most students spend very little, but the few high spenders are SO extreme that they pull the theoretical normal distribution way to the right, making it completely misaligned with reality.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstats::shapiro.test(x = Weeklyexp1$total_expenditure_last_week) %>%\n  broom::tidy()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 3\n  statistic  p.value method                     \n      <dbl>    <dbl> <chr>                      \n1     0.480 9.90e-11 Shapiro-Wilk normality test\n```\n\n\n:::\n:::\n\nSince the p.value is EXTREMELY small, we should reject the null hypothesis that the data follows a normal distribution.\n\nWe ideally should not be running a t-test because of the above reasons:\n\n::: {.cell}\n\n```{.r .cell-code}\nt4 <- mosaic::t_test(\n  Weeklyexp1$total_expenditure_last_week, # Name of variable\n  mu = 2000, # belief\n  alternative = \"two.sided\"\n) %>% # Check both sides\n  broom::tidy()\nt4\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 8\n  estimate statistic p.value parameter conf.low conf.high method     alternative\n     <dbl>     <dbl>   <dbl>     <dbl>    <dbl>     <dbl> <chr>      <chr>      \n1    4833.      2.10  0.0420        39    2108.     7558. One Sampl… two.sided  \n```\n\n\n:::\n:::\n\n-----------------------\n### Conclusion:\n\nThe data shows that Srishti students’ Diwali week spending is highly right-skewed, with most spending modest amounts and a few outliers spending very large sums. Males generally spent more than females, but the variation within the male group is much higher. The distribution clearly violates normality assumptions, as confirmed by the Shapiro–Wilk test.\n\n\n",
    "supporting": [
      "weeklyexpenses_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}